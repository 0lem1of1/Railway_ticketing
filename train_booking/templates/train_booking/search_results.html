{% extends 'main/base.html' %}

{% block content %}
  <h2 class="mt-4">Search Results</h2>
  {% if journeys %}
    <ul class="list-group">
      {% for journey in journeys %}
        <li class="list-group-item">
          <strong>Source:</strong> {{ journey.train.source_station }}<br>
          <strong>Destination:</strong> {{ journey.train.destination_station }}<br>
          <strong>Departure Time:</strong> {{ journey.train.departure_time }}<br>
          <strong>Departure Date:</strong> {{ journey.departure_date }}<br>
          <strong>Arrival Time:</strong> {{ journey.train.arrival_time }}<br>
          <strong>Arrival Date:</strong> {{ journey.arrival_date }}<br>
          <strong>Route:</strong> {% for station in journey.train.route.all %}{{ station.name }}{% if not forloop.last %}{% if forloop.counter == 2 %} ( {% endif %} -> {% endif %}{% if forloop.last %}  ) {% endif %}{% endfor %}<br>
          The bracketed ones are the middle stations between souce and destination

          <!-- Add a button to redirect to the booking form -->
          <div class="text-right"> <!-- Align content to the right -->
            <a href="{% url 'create_booking' %}?journey_id={{ journey.id }}" class="btn btn-primary">Book Now</a>
          </div>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>No journeys found for the specified search criteria.</p>
  {% endif %}
{% endblock %}